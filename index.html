<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>IA de Agendamento BRQA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonte -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Import Maps -->
  <script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@19.2.3",
      "react-dom/client": "https://esm.sh/react-dom@19.2.3/client",
      "@google/genai": "https://esm.sh/@google/genai@1.38.0"
    }
  }
  </script>

  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      overflow: hidden;
      background: #020617;
    }

    .bg-animated {
      position: fixed;
      inset: 0;
      z-index: -1;
      background: radial-gradient(circle at center, #1e293b 0%, #020617 100%);
    }

    .bg-animated::before {
      content: "";
      position: absolute;
      width: 200%;
      height: 200%;
      top: -50%;
      left: -50%;
      background-image:
        linear-gradient(rgba(59,130,246,.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(59,130,246,.1) 1px, transparent 1px);
      background-size: 50px 50px;
      transform: perspective(500px) rotateX(60deg);
      animation: grid 20s linear infinite;
    }

    @keyframes grid {
      from { transform: perspective(500px) rotateX(60deg) translateY(0); }
      to { transform: perspective(500px) rotateX(60deg) translateY(50px); }
    }

    .blob {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: .35;
      animation: float 20s infinite ease-in-out;
    }

    @keyframes float {
      0%,100% { transform: translate(0,0) scale(1); }
      33% { transform: translate(80px,-40px) scale(1.2); }
      66% { transform: translate(-40px,80px) scale(.8); }
    }
  </style>
</head>

<body class="text-slate-100">

  <!-- Background -->
  <div class="bg-animated">
    <div class="blob" style="width:500px;height:500px;background:#3b82f6;top:-10%;left:-10%"></div>
    <div class="blob" style="width:400px;height:400px;background:#1d4ed8;bottom:10%;right:-5%"></div>
    <div class="blob" style="width:300px;height:300px;background:#60a5fa;top:40%;left:30%"></div>
  </div>

  <!-- React root -->
  <div id="root"></div>

  <!-- APP -->
  <script type="module">
    import React from "react";
    import { createRoot } from "react-dom/client";
    import { GoogleGenerativeAI } from "@google/genai";

    function App() {
      const [mensagem, setMensagem] = React.useState("IA pronta para uso.");
      const [aniversariantes, setAniversariantes] = React.useState([]);

      async function carregarAniversariantes() {
        const url = "https://script.google.com/macros/s/AKfycby-pvQ3Zmep2eCELIaMc90dvdJxGTILu-wj91J3ImQpBY-ZAVyXI-oTbSLZXv12wEDbNg/exec?action=listarAniversariantes";
        const res = await fetch(url);
        const data = await res.json();
        setAniversariantes(data.filter(a => a.ativo));
      }

      return (
        <div className="h-screen flex items-center justify-center">
          <div className="bg-slate-900/80 backdrop-blur-xl rounded-2xl p-8 w-[420px] shadow-2xl border border-slate-700">
            <h1 className="text-2xl font-bold mb-2">BRQA â€¢ IA de Agendamento</h1>
            <p className="text-slate-400 mb-4">{mensagem}</p>

            <button
              onClick={carregarAniversariantes}
              className="w-full bg-blue-600 hover:bg-blue-700 transition rounded-lg py-2 font-medium mb-4">
              Carregar Aniversariantes
            </button>

            <div className="space-y-2 max-h-40 overflow-auto">
              {aniversariantes.map(a => (
                <div key={a.id} className="bg-slate-800 rounded-lg p-2 text-sm">
                  ðŸŽ‚ {a.nome} â€” {a.data_aniversario}
                </div>
              ))}
            </div>
          </div>
        </div>
      );
    }

    const root = createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>

</body>
</html>
